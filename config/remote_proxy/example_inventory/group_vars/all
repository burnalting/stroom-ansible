---
ansible_connection: ssh

# The user that ansible will connect as, must have sudo rights to 'sudo su -'.
# The user should have passwordless sudo and an ssh key pair that has already
# been set up on the remote host(s). The ssh key to use can be set on the command line
# using '--private-key=~/.ssh/my_private_key_id_rsa'
ansible_user: centos

# The name of the stack to deploy
stack_name: "stroom_proxy"

# The version of the stack to deploy
stack_version: "v6.0.27"

# The local directory where the stack configuration is kept. This configuration
# will be pushed out to the proxy hosts. This directory should be under source
# control.
# IMPORTANT: This is relative to the playbook being run.
local_config_dir: "../config/remote_proxy"

# The user that stroom-proxy will run as
stroom_user: "stroomuser"

# The directory where stroom-proxy will be installed on the remote host
stack_install_root_dir: "/home/{{ stroom_user }}"

proxy_forward_url: "https://downstream-proxy.some.domain/stroom/datafeed"

# SSL Configuration
server_certificate_filename: "dummy.server.cert"
server_certificate_key_filename: "dummy.server.key"
server_certificate_authority_filename: "dummy.ca.key"

client_keystore_filename: "ddddd"
client_keystore_password: "some password"

client_truststore_filename: "eeeee"
client_truststore_password: "some password"

# name/value pairs to set in the stack env file
# These will replace existing values in the env file or add a new line
# if the name doesn't already exist
stack_env_vars:
  - name: "STROOM_PROXY_REMOTE_FORWARD_URL"
    value: "xxx   https://downstream-proxy.some.domain/stroom/datafeed"
  - name: "NGINX_SSL_CERTIFICATE_KEY"
    value: "{{ server_certificate_key_filename }}"
  - name: "NGINX_SSL_CERTIFICATE"
    value: "{{ server_certificate_filename }}"
  - name: "NGINX_SSL_CLIENT_CERTIFICATE"
    value: "{{ server_certificate_authority_filename }}"
  - name: "STROOM_NGINX_DOCKER_REPO"
    value: "xxx   gchq/stroom-nginx"
  - name: "STROOM_PROXY_DOCKER_REPO"
    value: "xxx   gchq/stroom-proxy"
  - name: "STROOM_PROXY_REMOTE_CLIENT_KEYSTORE_PASSWORD"
    value: "xxx   password"
  - name: "STROOM_PROXY_REMOTE_CLIENT_KEYSTORE_PATH"
    value: "xxx   /stroom-proxy/certs/client.jks"
  - name: "STROOM_PROXY_REMOTE_CLIENT_TRUSTSTORE_PASSWORD"
    value: "xxx   password"
  - name: "STROOM_PROXY_REMOTE_CLIENT_TRUSTSTORE_PATH"
    value: "xxx   /stroom-proxy/certs/ca.jks"
  - name: "STROOM_PROXY_REMOTE_FEED_STATUS_API_KEY"
    value: "xxx   xxx some token xxx"
  - name: "STROOM_PROXY_REMOTE_FEED_STATUS_URL"
    value: "https://downstream-stroom-or-proxy.some.domain/api/proxy/feedStatus/v1"
  - name: "STROOM_PROXY_REMOTE_FORWARDING_KEYSTORE_PASSWORD"
    value: "xxx   password"
  - name: "STROOM_PROXY_REMOTE_FORWARDING_KEYSTORE_PATH"
    value: "xxx   /stroom-proxy/certs/client.jks"
  - name: "STROOM_PROXY_REMOTE_FORWARDING_TRUSTSTORE_PASSWORD"
    value: "xxx   password"
  - name: "STROOM_PROXY_REMOTE_FORWARDING_TRUSTSTORE_PATH"
    value: "xxx   /stroom-proxy/certs/ca.jks"

# vim: set filetype=yaml shiftwidth=2 tabstop=2 expandtab:
